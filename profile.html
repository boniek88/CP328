<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager - Profile</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        /* Custom styles can be added here */
        .navbar-brand {
            font-weight: bold;
        }
    </style>
</head>
<body>

    <audio controls loop>
        <source src="mp3/04.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <!--a class="navbar-brand" href="index.html">Task Manager</a-->
            <a class="navbar-brand" href="index.html">
                <svg class="logo-icon" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
                <span class="logo-text">TaskMaster</span>
            </a>
            <div class="navbar-nav">
                <a class="nav-link active" href="index.html" data-page="home">Home</a>
                <a class="nav-link" href="tasks.html" data-page="tasks">Tasks</a>
                <a class="nav-link" href="calendar.html" data-page="calendar">Calendar</a>
                <a class="nav-link" href="profile.html" data-page="profile">Profile</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h2>My Profile</h2>
        <div class="card mb-4" style="background-color: rgba(208, 196, 28, 0.4)"> <!--rgba(233, 236, 239, 0.4)-->
            <div class="card-body">
                <h3>Current Profile:</h3>
                <p>Name: <span id="namePreview">John Doe</span></p>
                <p>Email: <span id="emailPreview">john.doe@example.com</span></p>
                <p>Role: <span id="rolePreview">Project Manager</span></p>
            </div>
        </div>

        <h4>Edit Profile</h4>
        <form id="profileForm">
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" value="John Doe">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" value="john.doe@example.com">
            </div>
            <div class="mb-3">
                <label for="role" class="form-label">Role</label>
                <input type="text" class="form-control" id="role" value="Project Manager">
            </div>
            <button type="submit" class="btn btn-primary">Update Profile</button>
            <button type="button" id="resetButton" class="btn btn-secondary">Reset to Default</button>
        </form>
    </div>

    <footer>
        &copy; 2024 Boniek's Capstone Project.  All rights reserved.
    </footer>

    <script>
    // Using ES6 syntax and adhering to DRY principle
    document.addEventListener('DOMContentLoaded', () => {
        const form = document.getElementById('profileForm');
        const inputs = form.querySelectorAll('input');
        const resetButton = document.getElementById('resetButton');
        const defaultValues = {
            name: "John Doe",
            email: "john.doe@example.com",
            role: "Project Manager"
        };

        // Function to update preview
        const updatePreview = (id, value) => {
            const previewElement = document.getElementById(`${id}Preview`);
            if (previewElement) {
                previewElement.textContent = value;
            }
        };

        // Function to load values from localStorage
        const loadFromStorage = () => {
            const storedValues = JSON.parse(localStorage.getItem('profileValues'));
            return storedValues || defaultValues;
        };

        // Function to save values to localStorage
        const saveToStorage = (values) => {
            localStorage.setItem('profileValues', JSON.stringify(values));
        };

        // Function to update form and preview
        const updateFormAndPreview = (values) => {
            inputs.forEach(input => {
                input.value = values[input.id];
                updatePreview(input.id, input.value);
            });
        };

        // Initialize form with stored or default values
        let currentValues = loadFromStorage();
        updateFormAndPreview(currentValues);

        // Add input event listeners
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                updatePreview(this.id, this.value);
            });
        });

        // Add form submit event listener
        form.addEventListener('submit', (event) => {
            event.preventDefault();
            inputs.forEach(input => {
                currentValues[input.id] = input.value;
            });
            saveToStorage(currentValues);
            alert('Profile updated!');
        });

        // Add reset button event listener
        resetButton.addEventListener('click', () => {
            localStorage.removeItem('profileValues');
            currentValues = { ...defaultValues };
            updateFormAndPreview(currentValues);
            alert('Profile reset to default values!');
        });
    });
    </script>
</body>
</html>