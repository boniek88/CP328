<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager - Tasks</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        /* Custom styles can be added here */
        .navbar-brand {
            font-weight: bold;
        }
    </style>
</head>
<body>

    <audio controls loop>
        <source src="mp3/02.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <!--a class="navbar-brand" href="index.html">Task Manager</a-->
            <a class="navbar-brand" href="index.html">
                <svg class="logo-icon" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
                <span class="logo-text">TaskMaster</span>
            </a>
            <div class="navbar-nav">
                <a class="nav-link active" href="index.html" data-page="home">Home</a>
                <a class="nav-link" href="tasks.html" data-page="tasks">Tasks</a>
                <a class="nav-link" href="calendar.html" data-page="calendar">Calendar</a>
                <a class="nav-link" href="profile.html" data-page="profile">Profile</a>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <p>Total number of tasks: <span id="taskCountDisplay">0</span></p>

        <h2>My Tasks Due Today (10 Max)</h2>
        <div class="mb-3">
            <input type="text" class="form-control" id="newTask" placeholder="Enter new task">
            <button class="btn btn-primary mt-2" id="addTask">Add Task</button>
            <button class="btn btn-secondary mt-2" id="resetTasks">Reset Tasks</button>
        </div>
        <table class="table" id="taskTable">
            <thead>
                <tr>
                    <th>Task</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <!-- Tasks will be added here dynamically -->
            </tbody>
        </table>
    </div>

    <footer>
        &copy; 2024 Boniek's Capstone Project.  All rights reserved.
    </footer>

    <script>
    // Using ES6 syntax and adhering to DRY principle
    document.addEventListener('DOMContentLoaded', () => {
        // DOM element selectors
        const newTaskInput = document.getElementById('newTask');
        const addTaskButton = document.getElementById('addTask');
        const resetTasksButton = document.getElementById('resetTasks');
        const taskTable = document.getElementById('taskTable').getElementsByTagName('tbody')[0];
        const taskCountDisplay = document.getElementById('taskCountDisplay');

        // Default tasks
        const defaultTasks = [
            'Complete project proposal',
            'Schedule team meeting',
            'Review client feedback'
        ];

        // Load tasks from localStorage or use default
        const loadTasks = () => JSON.parse(localStorage.getItem('tasks')) || [...defaultTasks];

        // Save tasks to localStorage
        const saveTasks = tasks => localStorage.setItem('tasks', JSON.stringify(tasks));

        // Update task count
        const updateTaskCount = () => {
            const count = loadTasks().length;
            localStorage.setItem('taskCount', count);
            taskCountDisplay.textContent = count;
        };

        // Display tasks in the table
        const displayTasks = () => {
            const tasks = loadTasks();
            taskTable.innerHTML = '';
            tasks.forEach((task, index) => {
                const row = taskTable.insertRow();
                const cellTask = row.insertCell(0);
                const cellAction = row.insertCell(1);
                cellTask.textContent = task;
                cellAction.innerHTML = `<button class="btn btn-danger btn-sm deleteTask" data-index="${index}">Delete</button>`;
            });
            updateTaskCount();
        };

        // Add a new task
        const addTask = task => {
            const tasks = loadTasks();
            if (tasks.length >= 10) {
                alert('Error: Maximum of 10 tasks allowed. Please delete a task before adding a new one.');
                return;
            }
            tasks.push(task);
            saveTasks(tasks);
            displayTasks();
        };

        // Delete a task
        const deleteTask = index => {
            const tasks = loadTasks();
            tasks.splice(index, 1);
            saveTasks(tasks);
            displayTasks();
        };

        // Reset tasks to default
        const resetTasks = () => {
            saveTasks(defaultTasks);
            displayTasks();
        };

        // Event listeners
        addTaskButton.addEventListener('click', () => {
            const task = newTaskInput.value.trim();
            if (task) {
                addTask(task);
                newTaskInput.value = '';
            }
        });

        taskTable.addEventListener('click', e => {
            if (e.target.classList.contains('deleteTask')) {
                const index = e.target.getAttribute('data-index');
                deleteTask(index);
            }
        });

        resetTasksButton.addEventListener('click', resetTasks);

        // Initial display
        displayTasks();
    });
    </script>
</body>
</html>